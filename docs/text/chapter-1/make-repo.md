# リポジトリの作成

前編の目標は、Git と Gitea を組み合わせてクラウドストレージとして扱えるようになることです。この章では Gitea 上に Git リポジトリを作成し、手元の環境に複製（クローン）するところまでを行います。

## Git の役割

一言でいえば Git とは「**ファイルのバージョン管理ツール**」です。

今はとりあえず「複数人の開発における複雑なバージョン管理を手助けしてくれる」という程度のことを押さえていただければよいと思います。具体的に Git を使うことで何ができるのか、どういう部分が便利なのかは実際に手を動かしていくと段々と分かってくるはずです。

Git の操作に慣れるために、まず共同開発のことは忘れて個人的な用途に供してみましょう。最も簡単なところでは、Gitea と組み合わせて使うことで **無料のクラウドストレージ** 的な使い方ができます。Gitea についての説明は後に回して、まずは何ができるかを見てみましょう。

:::info 便利なクラウドストレージ
Mac ユーザーなら iCloud Drive に馴染みが深いでしょう。私（このページの著者）は自宅に Mac mini を置いて大学には MacBook を持っていくので、授業の資料は iCloud Drive に置いて両方から見られるようにしています。両方がインターネットに繋がっていれば、一方を更新すると他方にも反映されます。資料のデータそのものは両方に保存されていて、オフラインでも資料を閲覧することはできます。

Microsoft が提供する OneDrive にも同様の機能がありますね。このようなクラウドストレージサービスとほぼ同じことが Git と Gitea によって実現できます。それを試してみましょう。
:::

## リポジトリの作成

Gitea のページから [新しいリポジトリを作成](https://git.trap.jp/repo/create) します。

- リポジトリ名を "mydrive" とする
- リポジトリの初期設定にチェックを入れる

以上のように設定して最下部の「リポジトリを作成」ボタンを押してください。

![](https://md.trap.jp/uploads/upload_56c165c7bbf7b3894e1f42d953dad939.png)

リポジトリが作成されると以下のような画面に遷移します。

![](https://md.trap.jp/uploads/upload_8998ee308cd12e4cec0984e09ce3c26c.png)

Code と書かれた青いボタンをクリックして、以下のように選択してください。

![](https://md.trap.jp/uploads/upload_368aa3097d8929cec234113df297f47e.png)

四角が 2 つ重なったマークのボタンをクリックすることで、自動的に以下のような文字列がコピーされます。

```txt
ssh://git@git.trap.jp:2200/ユーザー名/mydrive.git
```

この文字列は Web 上のリポジトリの場所を表す URL の一種なのですが、よく目にする `https://` から始まるものと異なり、データを SSH プロトコルというもので暗号化した上でやりとりするための形式になっています。

## リポジトリのクローン

iCloud Drive や OneDrive では、特定の名前（たとえば "iCloud Drive"）がついた単一のディレクトリが与えられ、その中の好きな場所にファイルを置いておけるという感じでした。

![](https://md.trap.jp/uploads/upload_463a69fe38aad51ec9417420d5723876.png)


Git + Gitea でクラウドストレージを作る場合、前に挙げたクラウドストレージと異なり、**同期されるディレクトリはどこでもよい**です。これから、Desktop ディレクトリと Downloads ディレクトリのそれぞれにクラウドストレージの同期ディレクトリを作ってみます。

では、実際にリポジトリをクローンします。ターミナルの画面で以下を実行してください。

```sh
cd ~
```

記号 `~` は [シェルコマンド](/text/chapter-1/shell-commands.html) の章で紹介した『ホームディレクトリ』を意味します。このコマンドによって、ターミナル上でホームディレクトリを開くことができます。

次に、以下を実行してホームディレクトリ内の Desktop ディレクトリに移ってください。

```sh
cd Desktop
```

:::info Windows ユーザー向けの補足
WSL2 環境を開いて講習会を受けている場合も、[シェルコマンド](/text/chapter-1/shell-commands.html#windows-%E3%83%A6%E3%83%BC%E3%82%B5%E3%82%99%E3%83%BC%E3%81%AE%E6%96%B9%E3%81%B8) の章を追えていればホームディレクトリ内に Desktop というディレクトリが存在し、移れるはずです。

```txt
cd: no such file or directory: Desktop
```

もし上のように表示された場合、[シェルコマンド](/text/chapter-1/shell-commands.html#windows-%E3%83%A6%E3%83%BC%E3%82%B5%E3%82%99%E3%83%BC%E3%81%AE%E6%96%B9%E3%81%B8) の章で示した手順を追えていない可能性があります。もう一度見直してみてください。分からないことがあれば TA を頼りましょう。
:::

Desktop ディレクトリで以下を実行してください。なお、『先ほどの文字列』とは先ほど Gitea のページ上でコピーした `ssh://` から始まる文字列です。

```sh
git clone 先ほどの文字列
```

以上の手順によって、Desktop ディレクトリ内に新たに mydrive というディレクトリが作成されます。`ls`（ファイルやディレクトリの一覧表示）を実行して確認してみましょう。

:::tip Finder やエクスプローラーで見てみる
Desktop ディレクトリにて以下のようなコマンドを実行することで、Mac なら Finder、Windows ならエクスプローラーでカレントディレクトリを開くことができます。記号 `.` はカレントディレクトリを表します。

```sh
# Windows では以下を実行する
explorer.exe .

# Mac では以下を実行する
open .
```

表示されたウィンドウには mydrive というディレクトリがあるはずです。開いてみると、README.md というテキストファイルが入っています。mydrive ディレクトリは GitHub という Web サービス上で先ほど作成した **Git リポジトリ** の写しになっています。
:::

このあとの手順で必要になるので Downloads ディレクトリでもリポジトリのクローンを行ってください。`cd ~` によってホームディレクトリに戻ったら、あとは同じ手順です。

```sh
cd ~              　　　 # 1. ホームディレクトリに移動
cd Downloads      　　　 # 2. Downloads ディレクトリに移動
git clone ssh://文字列   # 3. リポジトリをクローン
ls                　　　 # 4. mydrive というディレクトリの存在を確認
```

:::tip VSCode 上でリポジトリをクローン
VSCode のスタートページの中央左あたりに『Git リポジトリのクローン…』というボタンを見つけた方がいるかも知れません。ここをクリックしてリポジトリの URL を打ち込むことでデバイス上でディレクトリを選択するダイアログが開き、この方法でも Git リポジトリをクローンすることができます。

![](https://md.trap.jp/uploads/upload_db6e511be6ee2d1b002a87fd7945e529.png)

今回はシェルコマンドの復習を兼ねてターミナルを扱ってクローン操作を行いましたが、VSCode 上でクローンする方法でももちろん問題ありません。ところで、この実習資料ではこの後一度も Git コマンドを使っていないので、もしクローンまで VSCode 上で済ませてしまうと、いよいよ Git コマンドの出番がどこにもなくなってしまう可能性は、無きにしも非ず。
:::

再度、`cd` と `ls` を駆使して Desktop と Downloads のそれぞれに mydrive ディレクトリが存在することを確認してください。確認できたら次に進んでください。