# コミットと同期

クラウドストレージの利点は「異なる場所からアクセスし、編集し、同期できる」ことです。Git と Gitea を使って作ったクラウドストレージで同じことをしてみましょう。

## リポジトリの更新

VSCode を開き、ウィンドウにデスクトップのディレクトリ mydrive をドラッグ & ドロップすると、VSCode でそのディレクトリを開くことができます。さらに、ウィンドウ左のアクティビティバーからソース管理タブ（○ が 3 つ曲線で繋がれた図形）を開いておきます。

![](https://md.trap.jp/uploads/upload_423e2e5dd8b678bbe6d85fc897dc1858.png)

この状態で README.md を編集して保存すると画面に色々変化が生じます。

![](https://md.trap.jp/uploads/upload_068f6061b41bedd6af5ab51c884785b9.png)

- README.md で編集した部分の左側に明るい緑色 or 青色の縦線が入る
- サイドバーの「変更」の部分に README.md が追加される
- 「コミット」ボタンが使用可能になる

など。この状態で以下を順に実行してください。

1. カーソルを「変更」の文字の上に持っていき、すぐ右隣に表示される「＋」を押す
2. その上の入力欄に「README.md 更新」と書き入れて「コミット」ボタンを押す
3. 「コミット」ボタンが「変更の同期」ボタンに切り替わるので、それも押す

![](https://md.trap.jp/uploads/upload_1fd20f00fedfc5586a5b0e23e0762b33.png)
<p style="font-size: 12px; text-align: center; margin: -16px 0 20px 0">手順 2 の途中</p>

:::info COMMIT_EDITMSG
入力欄（コミットメッセージ）が空欄のまま「コミット」ボタンを押すと VSCode が英語が書かれた謎のファイルを表示して脅かして来ますが、単純に「入力欄が空欄だよ〜」と言われているだけです。開かれたファイルを閉じてコミットメッセージを書くことで問題なくコミットできます。
:::

ここまで終わったら、Gitea のリポジトリのページに飛んでみます。

![](https://md.trap.jp/uploads/upload_8467967a709e4915a82aeded1ff83ba3.png)

先ほどの更新が反映されていることが確認できます。

## リポジトリの同期

今度はダウンロードディレクトリにある mydrive を開きます。本当はこれが別の PC から開いている想定です。

![](https://md.trap.jp/uploads/upload_db1204be40283f41b1c1fdfe171af8b6.png)

VSCode で開いて少し待つと「コミット」ボタンが「変更の同期」ボタンに変化します。

:::tip 同期の方向
先ほどと違うのは矢印が上ではなく下を向いている点です。これは先ほどの同期が「デスクトップの mydrive → Gitea 上の mydrive」だったのに対し、今回の同期が「Gitea 上の mydrive → ダウンロードの mydrive」であることを表しています。
:::

「変更の同期」ボタンを押すと README.md の内容が書き変わり、先ほど行った変更が同期されたことが確認できます。

![](https://md.trap.jp/uploads/upload_b7657ae7961adb0fa1b007b599e87229.png)

今回はリポジトリに元からただ一つ置かれていた README.md というテキストファイルの更新と同期を試しましたが、もちろん新しいファイルを同じ場所に置いて同期させることもできます。授業資料の PDF ファイルももちろん載せられます。

Git と Gitea を使ってクラウドストレージを作ることができましたね。