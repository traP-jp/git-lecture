import{_ as s,c as e,o as t,ag as i}from"./chunks/framework.DPDPlp3K.js";const g=JSON.parse('{"title":"SSH キーの登録","description":"","frontmatter":{},"headers":[],"relativePath":"text/chapter-1/gitea-ssh.md","filePath":"text/chapter-1/gitea-ssh.md"}'),p={name:"text/chapter-1/gitea-ssh.md"};function n(h,a,l,r,d,o){return t(),e("div",null,a[0]||(a[0]=[i(`<h1 id="ssh-キーの登録" tabindex="-1">SSH キーの登録 <a class="header-anchor" href="#ssh-キーの登録" aria-label="Permalink to &quot;SSH キーの登録&quot;">​</a></h1><p>Git リポジトリを閲覧・編集する権限があることを証明するために用いられる SSH キーというものを登録します。以下の操作はこの後のテキストを追うために必要ですが、操作の意味はよく分からなくても大丈夫です。</p><h2 id="trap-gitea" tabindex="-1">traP Gitea <a class="header-anchor" href="#trap-gitea" aria-label="Permalink to &quot;traP Gitea&quot;">​</a></h2><p>この講習会では Gitea という Web サービスを使用します。</p><p>このサービスの役割を言語化するならば「Git リポジトリの保管庫」です。<a href="/text/chapter-1/branch.html#gitea-の役割">ブランチ</a> の章で詳しい説明がなされるので、それまでは「よく分からないけど Git というソフトウェアに関係する Web サービスなんだな」程度に思ってもらえれば大丈夫です。Gitea の類似サービスとしては GitHub や GitLab が有名ですが、この Gitea のサーバーは traP が管理しています。</p><p><a href="https://git.trap.jp/" target="_blank" rel="noreferrer">git.trap.jp</a> にアクセスしたら、右上のボタンからログインしておきましょう。</p><h2 id="ssh-キーの生成" tabindex="-1">SSH キーの生成 <a class="header-anchor" href="#ssh-キーの生成" aria-label="Permalink to &quot;SSH キーの生成&quot;">​</a></h2><p>ターミナルを開き、以下を実行します。</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh-keygen</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ed25519</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ユーザー名</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # traP の ID がおすすめ</span></span></code></pre></div><p>キーのファイルを作成する場所を聞かれますが、キーを登録したことがない場合はデフォルトでよいので何も入力せず Enter を押します。</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Generating public/private ed25519 key pair.</span></span>
<span class="line"><span>Enter file in which to save the key (~/.ssh/id_ed25519):</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">キーの上書き注意</p><p>既に同じ場所 <code>~/.ssh/id_ed25519</code> に同じファイル名の SSH キーを作成したことがある場合、キーの情報が上書きされてしまうので注意してください。</p></div><p>以下のようにパスフレーズの設定を求められますが、何も入力せず Enter を押します。</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Enter passphrase (empty for no passphrase):</span></span></code></pre></div><p>パスフレーズの再入力でも同様に Enter を押します。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Enter same passphrase again:</span></span></code></pre></div><p>以上で SSH キーが生成できました。以下のコマンドで公開鍵を表示し、コピーしてください。</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_ed25519.pub</span></span></code></pre></div><h2 id="gitea-に-ssh-キーを登録する" tabindex="-1">Gitea に SSH キーを登録する <a class="header-anchor" href="#gitea-に-ssh-キーを登録する" aria-label="Permalink to &quot;Gitea に SSH キーを登録する&quot;">​</a></h2><p><a href="https://git.trap.jp/user/settings/keys" target="_blank" rel="noreferrer">SSH / GPGキー - traP Git</a> にアクセスし、「SSH キーの管理」の右にある「キーを追加」ボタンをクリックすると、以下のような入力欄が出現します。</p><p>「内容」の欄に先ほどコピーした公開鍵（末尾のメールアドレスまで含む）をペーストしてください。SSH キーはデバイスに保存されるので、複数のデバイスをお使いの場合は今操作中のデバイスを特定できるような「キー名」を付けておくことをお勧めします。</p><p><img src="https://md.trap.jp/uploads/upload_303b96a1cf59e2dae8d2d3bcd4bc6090.png" alt=""></p><p>「内容」欄の下にある「キーを追加」ボタンを押すことで登録が完了します。</p><h2 id="接続の確認" tabindex="-1">接続の確認 <a class="header-anchor" href="#接続の確認" aria-label="Permalink to &quot;接続の確認&quot;">​</a></h2><p>以下のコマンドを実行してください。<code>yes/no/[fingerprint]</code> は <code>yes</code> を選択してください。</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -T</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ssh://git@git.trap.jp:2200</span></span></code></pre></div><p>以下のように表示されたら、Gitea との SSH 接続に成功しています。</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Hi there, ユーザー名! You&#39;ve successfully authenticated with the key named キー名, but Gitea does not provide shell access.</span></span>
<span class="line"><span>If this is unexpected, please log in with password and setup Gitea under another user.</span></span></code></pre></div><p>以上で SSH キーの設定は終了です。</p><hr><p><a href="https://q.trap.jp/channels/event/workshop/git/exercise" target="_blank" rel="noreferrer">#event/workshop/git/exercise</a> の『<strong>SSH キーの登録 まで</strong>』にスタンプをつけよう！</p>`,31)]))}const k=s(p,[["render",n]]);export{g as __pageData,k as default};
